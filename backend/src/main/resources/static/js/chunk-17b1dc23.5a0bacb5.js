(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17b1dc23"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1db8":function(t,e,a){},"36d3":function(t,e,a){"use strict";a("1db8")},"58cb":function(t,e,a){"use strict";a("fdf0")},"841c":function(t,e,a){"use strict";var n=a("c65b"),i=a("d784"),s=a("825a"),l=a("1d80"),o=a("129f"),r=a("577e"),c=a("dc4a"),u=a("14c3");i("search",(function(t,e,a){return[function(e){var a=l(this),i=void 0==e?void 0:c(e,t);return i?n(i,e,a):new RegExp(e)[t](r(a))},function(t){var n=s(this),i=r(t),l=a(e,n,i);if(l.done)return l.value;var c=n.lastIndex;o(c,0)||(n.lastIndex=0);var f=u(n,i);return o(n.lastIndex,c)||(n.lastIndex=c),null===f?-1:f.index}]}))},c47b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"mainPanel",staticClass:"mainPanel"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"总仓库",name:"1"}},[1==t.activeName?a("div",{style:{height:t.tabHeight+"px"}},[t.loaded?a("Tab1"):t._e()],1):t._e()]),a("el-tab-pane",{attrs:{label:"个人仓库",name:"2"}},[2==t.activeName?a("div",{style:{height:t.tabHeight+"px"}},[t.loaded?a("Tab2"):t._e()],1):t._e()])],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"tabPanel",staticClass:"tabPanel"},[a("div",{ref:"searchPanel",staticClass:"searchPanel"},[a("el-form",{ref:"searchForm",attrs:{inline:!0,size:"small",model:t.searchForm}},[a("el-form-item",{attrs:{label:"备件名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.resetForm}},[t._v("重置")])],1)],1),a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",[a("el-button",{attrs:{size:"mini"},on:{click:t.resetData}},[t._v("还原所有数据")])],1)],1)],1),a("div",{ref:"statisPanel",staticClass:"statisPanel"},[a("div",{staticClass:"statisItem"},[a("p",[t._v(t._s(t.goodsNum))]),a("p",[t._v("商品总数")])]),a("div",{staticClass:"statisItem"},[a("p",[t._v(t._s(t.warningNum))]),a("p",[t._v("预警商品树")])]),a("div",{staticClass:"statisItem"},[a("p",[t._v(t._s(t.allStockList.length))]),a("p",[t._v("库存总数")])]),a("div",{staticClass:"statisItem"},[a("p",[t._v(t._s(t.normalNum))]),a("p",[t._v("正品总数")])]),a("div",{staticClass:"statisItem"},[a("p",[t._v(t._s(t.wasteNum))]),a("p",[t._v("废品总数")])]),a("div",{staticClass:"statisItem"},[a("p",[t._v(t._s(t.applyingNum))]),a("p",[t._v("申领中备件数")])])]),a("div",{staticClass:"tablePanel",style:{height:t.tableHeight+"px"}},[a("el-table",{staticClass:"tableGrow",staticStyle:{width:"100%"},attrs:{data:t.dataList,height:"100%"}},[a("el-table-column",{attrs:{label:"操作","min-width":"80",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.setWarning(e.row)}}},[t._v("设置预警")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"备件名称","show-overflow-tooltip":"","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.normal<=e.row.warning?"warning":""},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":"",label:"备件编号","min-width":"180"}}),a("el-table-column",{attrs:{prop:"classify","show-overflow-tooltip":"",label:"所属类别","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.classify[e.row.classify]))]}}])}),a("el-table-column",{attrs:{prop:"warehouse",label:"备件仓库","min-width":"140"}}),a("el-table-column",{attrs:{prop:"normal","show-overflow-tooltip":"",label:"正品数量","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.normal<=e.row.warning?"warning":""},[t._v(t._s(e.row.normal))])]}}])}),a("el-table-column",{attrs:{prop:"waste","show-overflow-tooltip":"",label:"废品数量","min-width":"140"}}),a("el-table-column",{attrs:{prop:"warning","show-overflow-tooltip":"",label:"预警数量","min-width":"140"}}),a("el-table-column",{attrs:{prop:"unit","show-overflow-tooltip":"",label:"备件单位","min-width":"140"}})],1)],1),a("div",{staticClass:"pagePanel"},[a("el-pagination",{attrs:{background:"","current-page":t.pageInfo.pageNum,"page-sizes":[10,20,30,40],"page-size":t.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){return t.$set(t.pageInfo,"pageNum",e)},"update:current-page":function(e){return t.$set(t.pageInfo,"pageNum",e)},"update:pageSize":function(e){return t.$set(t.pageInfo,"pageSize",e)},"update:page-size":function(e){return t.$set(t.pageInfo,"pageSize",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"设置预警",width:"30%",visible:t.dialogFormVisible,"modal-append-to-body":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"warnForm",attrs:{inline:!0,size:"small",model:t.warnForm}},[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:20,offset:2}},[a("el-form-item",{attrs:{label:"预警数量",prop:"warning"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"number",min:0,placeholder:"请输入",clearable:""},model:{value:t.warnForm.warning,callback:function(e){t.$set(t.warnForm,"warning",t._n(e))},expression:"warnForm.warning"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)],1)},l=[],o=a("b85c"),r=a("5530"),c=(a("ac1f"),a("841c"),a("4de4"),a("caad"),a("2532"),a("b0c0"),a("2f62")),u=a("0cd6"),f=a.n(u),p=(a("ed08"),{data:function(){return{pageInfo:{pageNum:1,pageSize:10},total:0,dataList:[],tableHeight:0,searchForm:{name:""},warnForm:{warning:0},dialogFormVisible:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["classify","allStockList","applyingList"])),{},{goodsNum:function(){var t,e=0,a=Object(o["a"])(this.allStockList);try{for(a.s();!(t=a.n()).done;){var n=t.value;e+=n.normal+n.waste}}catch(i){a.e(i)}finally{a.f()}return e},warningNum:function(){var t,e=0,a=Object(o["a"])(this.allStockList);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.normal<=n.warning&&e++}}catch(i){a.e(i)}finally{a.f()}return e},normalNum:function(){var t,e=0,a=Object(o["a"])(this.allStockList);try{for(a.s();!(t=a.n()).done;){var n=t.value;e+=n.normal}}catch(i){a.e(i)}finally{a.f()}return e},wasteNum:function(){var t,e=0,a=Object(o["a"])(this.allStockList);try{for(a.s();!(t=a.n()).done;){var n=t.value;e+=n.waste}}catch(i){a.e(i)}finally{a.f()}return e},applyingNum:function(){var t,e=0,a=Object(o["a"])(this.applyingList);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(1==n.state){var i,s=Object(o["a"])(n.parts);try{for(s.s();!(i=s.n()).done;){var l=i.value;e+=l.apply}}catch(r){s.e(r)}finally{s.f()}}}}catch(r){a.e(r)}finally{a.f()}return e}}),created:function(){console.log("AutoConsole: classify",this.classify),console.log("AutoConsole: allStockList",this.allStockList),console.log("AutoConsole: applyingList",this.applyingList),this.getList()},mounted:function(){var t=this;this.tableHeight=this.$refs.tabPanel.clientHeight-this.$refs.searchPanel.clientHeight-this.$refs.statisPanel.clientHeight-90,window.onresize=function(){return function(){t.tableHeight=t.$refs.tabPanel.clientHeight-t.$refs.searchPanel.clientHeight-t.$refs.statisPanel.clientHeight-90}()}},beforeDestroy:function(){window.onresize=null},methods:{paging:function(t,e,a){if(!t)return[];var n=f.a.drop(t,a*(e-1)),i=f.a.take(n,a);return i},handleSizeChange:function(t){this.pageInfo.pageNum=1,this.getList()},handleCurrentChange:function(t){this.pageInfo.pageNum=t,this.getList()},search:function(){this.pageInfo.pageNum=1,this.getList()},resetForm:function(){this.$refs.searchForm.resetFields(),this.search()},getList:function(){var t=this,e=this.allStockList.filter((function(e){return e.name.includes(t.searchForm.name)}));this.dataList=this.paging(e,this.pageInfo.pageNum,this.pageInfo.pageSize),this.total=e.length},setWarning:function(t){this.warnForm.warning=t.warning,this.warnForm.id=t.id,this.dialogFormVisible=!0},confirm:function(){this.$store.commit("demo/UPDATE_WARNING",this.warnForm),this.dialogFormVisible=!1,this.search()},resetData:function(){var t=this;this.$confirm("是否确认还原所有数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){localStorage.clear(),location.reload()})).catch((function(){t.$message({type:"info",message:"已取消"})}))}}}),h=p,m=(a("58cb"),a("2877")),g=Object(m["a"])(h,s,l,!1,null,"502b2028",null),d=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"tabPanel",staticClass:"tabPanel"},[a("div",{ref:"searchPanel",staticClass:"searchPanel"},[a("el-form",{ref:"searchForm",attrs:{inline:!0,size:"small",model:t.searchForm}},[a("el-form-item",{attrs:{label:"备件名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.resetForm}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"tablePanel",style:{height:t.tableHeight+"px"}},[a("el-table",{staticClass:"tableGrow",staticStyle:{width:"100%"},attrs:{data:t.dataList,height:"100%"}},[a("el-table-column",{attrs:{prop:"name",label:"备件名称","show-overflow-tooltip":"","min-width":"180"}}),a("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":"",label:"备件编号","min-width":"180"}}),a("el-table-column",{attrs:{prop:"state","show-overflow-tooltip":"",label:"所属类别","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.classify[e.row.classify]))]}}])}),a("el-table-column",{attrs:{prop:"normal","show-overflow-tooltip":"",label:"正品数量","min-width":"140"}}),a("el-table-column",{attrs:{prop:"unit","show-overflow-tooltip":"",label:"备件单位","min-width":"140"}})],1)],1),a("div",{staticClass:"pagePanel"},[a("el-pagination",{attrs:{background:"","current-page":t.pageInfo.pageNum,"page-sizes":[10,20,30,40],"page-size":t.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){return t.$set(t.pageInfo,"pageNum",e)},"update:current-page":function(e){return t.$set(t.pageInfo,"pageNum",e)},"update:pageSize":function(e){return t.$set(t.pageInfo,"pageSize",e)},"update:page-size":function(e){return t.$set(t.pageInfo,"pageSize",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},v=[],w={data:function(){return{pageInfo:{pageNum:1,pageSize:10},total:0,dataList:[],tableHeight:0,searchForm:{name:""}}},computed:Object(r["a"])({},Object(c["b"])(["classify","mimeStockList"])),created:function(){console.log("AutoConsole: classify",this.classify),console.log("AutoConsole: mimeStockList",this.mimeStockList),this.getList()},mounted:function(){var t=this;this.tableHeight=this.$refs.tabPanel.clientHeight-this.$refs.searchPanel.clientHeight-90,window.onresize=function(){return function(){t.tableHeight=t.$refs.tabPanel.clientHeight-t.$refs.searchPanel.clientHeight-90}()}},beforeDestroy:function(){window.onresize=null},methods:{paging:function(t,e,a){if(!t)return[];var n=f.a.drop(t,a*(e-1)),i=f.a.take(n,a);return i},handleSizeChange:function(t){this.pageInfo.pageNum=1,this.getList()},handleCurrentChange:function(t){this.pageInfo.pageNum=t,this.getList()},search:function(){this.pageInfo.pageNum=1,this.getList()},resetForm:function(){this.$refs.searchForm.resetFields(),this.search()},getList:function(){var t=this,e=this.mimeStockList.filter((function(e){return e.name.includes(t.searchForm.name)}));this.dataList=this.paging(e,this.pageInfo.pageNum,this.pageInfo.pageSize),this.total=e.length}}},y=w,_=(a("36d3"),Object(m["a"])(y,b,v,!1,null,"a2b195de",null)),z=_.exports,S={components:{Tab1:d,Tab2:z},data:function(){return{activeName:"1",tabHeight:0,loaded:!1}},mounted:function(){var t=this;this.tabHeight=this.$refs.mainPanel.clientHeight-40,window.onresize=function(){return function(){t.tabHeight=t.$refs.mainPanel.clientHeight-40}()},this.loaded=!0},beforeDestroy:function(){window.onresize=null}},k=S,F=Object(m["a"])(k,n,i,!1,null,null,null);e["default"]=F.exports},fdf0:function(t,e,a){}}]);
//# sourceMappingURL=chunk-17b1dc23.5a0bacb5.js.map